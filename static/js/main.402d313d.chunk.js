(this.webpackJsonprijksdraw=this.webpackJsonprijksdraw||[]).push([[0],{428:function(e){e.exports=JSON.parse('{"a":["airplane","alarm clock","anvil","apple","axe","baseball bat","baseball","basketball","beard","bed","bench","bicycle","bird","book","bread","bridge","broom","butterfly","camera","candle","car","cat","ceiling fan","cell phone","chair","circle","clock","cloud","coffee cup","cookie","cup","diving board","donut","door","drums","dumbbell","envelope","eye","eyeglasses","face","fan","flower","frying pan","grapes","hammer","hat","headphones","helmet","hot dog","ice cream","key","knife","ladder","laptop","light bulb","lightning","line","lollipop","microphone","moon","mountain","moustache","mushroom","pants","paper clip","pencil","pillow","pizza","power outlet","radio","rainbow","rifle","saw","scissors","screwdriver","shorts","shovel","smiley face","snake","sock","spider","spoon","square","star","stop sign","suitcase","sun","sword","syringe","t-shirt","table","tennis racquet","tent","tooth","traffic light","tree","triangle","umbrella","wheel","wristwatch"]}')},454:function(e,t,n){},459:function(e,t){},460:function(e,t){},468:function(e,t){},471:function(e,t){},472:function(e,t){},473:function(e,t){},483:function(e,t,n){},612:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(75),s=n.n(c),o=(n(454),n(5)),i=n.n(o),l=n(12),d=n(6),u=n(619),b=n(620),h=n(621),p=n(438),j=n(130),f=n(426),x=(n(483),n(618)),m=n(625),O=function(e,t){e.forEach((function(e){var n=Object(d.a)(e.bbox,4),r=n[0],a=n[1],c=n[2],s=n[3],o=Math.round(100*(e.score+Number.EPSILON))/100,i="Class: ".concat(e.class," (").concat(o,")"),l=Math.floor(16777215*Math.random()).toString(16);t.strokeStyle="#"+l,t.font="18px Arial",t.beginPath(),t.fillStyle="#"+l,t.fillText(i,r,a),t.rect(r,a,c,s),t.stroke()}))},g=n(28);function k(e){var t=new Image;t.onload=function(){if(n.current){n.current.width=t.width+100,n.current.height=t.height+100,n.current.getContext("2d").drawImage(t,50,50)}!function(){a.apply(this,arguments)}()},t.onerror=function(){console.error("The provided file couldn't be loaded as an Image media")};var n=Object(r.useRef)(null);function a(){return(a=Object(l.a)(i.a.mark((function t(){var r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.current){t.next=8;break}return t.next=3,e.cocoNet.detect(n.current);case 3:r=t.sent,a=n.current.getContext("2d"),console.info("Detected Objects:"),console.info(r),O(r,a);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(x.a,{orientation:"left",children:"Detect Objects in Images"}),Object(g.jsx)(u.a,{children:Object(g.jsx)(b.a,{span:24,children:Object(g.jsx)(m.a,{type:"file",onChange:function(e){t.src=URL.createObjectURL(e.currentTarget.files[0])}})})}),Object(g.jsx)(u.a,{children:Object(g.jsx)(b.a,{span:24,children:Object(g.jsx)("canvas",{ref:n})})})]})}k.displayName="ImageUploader";var y=k,w=n(23),v=n(7),C=n(11),S=n(428),D=function(){function e(){Object(v.a)(this,e),this.model=void 0,this.classes=void 0}return Object(C.a)(e,[{key:"loadModel",value:function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.e("model.json");case 2:this.model=e.sent,this.classes=S.a;case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getImageFromCanvas",value:function(e){return e.getContext("2d").getImageData(0,0,e.width,e.height)}},{key:"detect",value:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,a,c,s,o,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.getImageFromCanvas(t),j.b().startScope(),a=j.a.fromPixels(r,1),c=j.d.resizeBilinear(a,[28,28]).reshape([28,28,1]).toFloat(),s=j.f(1).sub(c.div(j.f(255))),o=s.expandDims(0),e.prev=6,1!==n){e.next=13;break}return e.next=10,this.predict(o);case 10:l=e.sent,e.next=16;break;case 13:return e.next=15,this.predictTopN(o,n);case 15:l=e.sent;case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(6),e.t0;case 21:return j.b().endScope(),e.abrupt("return",l);case 23:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"predict",value:function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.model||!this.classes){e.next=7;break}return e.next=3,this.model.predict(t).argMax(-1).data();case 3:return n=e.sent,e.abrupt("return",this.classes[n[0]]);case 7:throw new Error("DoddleClassifier: Please load the model first before predicting.");case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"predictTopN",value:function(){var e=Object(l.a)(i.a.mark((function e(t,n){var r,a,c=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.model||!this.classes){e.next=8;break}return e.next=3,this.model.predict(t).data();case 3:return r=e.sent,a=Array.from(Object(w.a)(r).sort((function(e,t){return t-e})).slice(0,n)),e.abrupt("return",a.map((function(e){return{class:c.classes[r.indexOf(e)],score:e}})));case 8:throw new Error("DoddleClassifier: Please load the model first before predicting top N.");case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),I=n(229),T=n(624),R=n(212),N=n(622),F=n(623),M="png",E="sketch.".concat(M),P="black",W=n(429),B=n(430),L=n(158),z=n(627),q=n(626),A=n(449),U=n(628),V=n(629),J=n(630),H=n(631),Q=n(443);function Y(e){var t=Object(r.useState)(!0),n=Object(d.a)(t,2),a=n[0],c=n[1];function s(){return(s=Object(l.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sketchRef.exportImage(M);case 3:n=t.sent,(r=document.createElement("a")).setAttribute("href",n),r.setAttribute("download",E),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}var o=[{buttonType:"primary",text:"Undo",icon:Object(g.jsx)(z.a,{}),onClick:function(){e.sketchRef.undo()}},{buttonType:"primary",text:"Redo",icon:Object(g.jsx)(q.a,{}),onClick:function(){e.sketchRef.redo()}},{buttonType:"dashed",text:"Pen Mode",icon:Object(g.jsx)(A.a,{}),onClick:function(){e.sketchRef.eraseMode(!1),c(!0)}},{buttonType:"dashed",text:"Eraser Mode",icon:Object(g.jsx)(U.a,{}),onClick:function(){e.sketchRef.eraseMode(!0),c(!1)}},{buttonType:"primary",text:"Clear",icon:Object(g.jsx)(V.a,{}),isDanger:!0,onClick:function(){e.sketchRef.clearCanvas()}},{buttonType:"primary",text:"Reset",icon:Object(g.jsx)(J.a,{}),isDanger:!0,onClick:function(){e.sketchRef.resetCanvas()}},{buttonType:"primary",text:"Download",icon:Object(g.jsx)(H.a,{}),onClick:function(){return s.apply(this,arguments)},style:{backgroundColor:"green",borderColor:"green"}}];return Object(g.jsxs)(g.Fragment,{children:[o.map((function(e,t){return Object(g.jsx)(R.a,{type:e.buttonType,icon:e.icon,onClick:e.onClick,style:Object(B.a)({width:"100%",display:"block",marginBottom:"1em"},e.style),danger:e.isDanger,children:e.text},t)})),Object(g.jsx)(L.a,{title:Object(g.jsx)(Q.a,{color:e.strokeColor,onChangeComplete:function(t){return e.setStrokeColor(t.hex)}}),children:Object(g.jsxs)(R.a,{type:"dashed",style:{width:"100%",display:"block",marginBottom:"1em"},children:[Object(g.jsx)("span",{style:{backgroundColor:e.strokeColor,borderColor:P,borderWidth:"1px",borderStyle:"dashed",width:"1em",height:"1em",marginRight:"0.5em",verticalAlign:"middle"}}),"Stroke Color"]})}),Object(g.jsxs)("div",{style:{marginBottom:"1em"},children:[Object(g.jsx)("label",{htmlFor:"stroke-width",children:"Stroke Width:"}),Object(g.jsx)(T.a,{id:"stroke-width",name:"stroke-width",min:0,max:100,defaultValue:10,onChange:function(t){return e.setStrokeWidth(t)},disabled:!a,style:{width:"100%"}})]}),Object(g.jsxs)("div",{style:{marginBottom:"1em"},children:[Object(g.jsx)("label",{htmlFor:"erase-width",children:"Erase Width:"}),Object(g.jsx)(T.a,{id:"erase-width",name:"erase-width",min:0,max:100,defaultValue:10,onChange:function(t){return e.setEraseWidth(t)},disabled:a,style:{width:"100%"}})]})]})}Y.displayName="ImageDrawerTools";var G=Y;function K(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)("white"),o=Object(d.a)(s,2),i=o[0],l=o[1],h=Object(r.useState)(10),p=Object(d.a)(h,2),j=p[0],f=p[1],x=Object(r.useState)(10),m=Object(d.a)(x,2),O=m[0],k=m[1];return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(u.a,{gutter:8,children:[Object(g.jsx)(b.a,{span:20,children:Object(g.jsx)(W.a,{ref:function(t){c(t),e.setSketchCanvas(t)},style:{border:"0.0625rem solid #9c9c9c",borderRadius:"0.25rem"},width:"100%",height:"400px",strokeWidth:j,eraserWidth:O,strokeColor:i,canvasColor:P})}),Object(g.jsx)(b.a,{span:4,children:a&&Object(g.jsx)(G,{sketchRef:a,strokeColor:i,setStrokeColor:l,setEraseWidth:k,setStrokeWidth:f})})]})})}K.displayName="ImageDrawer";var X,Z=K,$=I.a.Option;function _(e){var t=Object(r.useState)(),n=Object(d.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(X.coco),o=Object(d.a)(s,2),h=o[0],p=o[1],j=Object(r.useState)(5),f=Object(d.a)(j,2),m=f[0],k=f[1],y=Object(r.useState)([]),w=Object(d.a)(y,2),v=w[0],C=w[1],S=new Image;S.onload=function(){return A.apply(this,arguments)},S.onerror=function(){console.error("The provided file couldn't be loaded as an Image media")};var D=Object(r.useState)(),E=Object(d.a)(D,2),P=E[0],W=E[1];function B(){return L.apply(this,arguments)}function L(){return(L=Object(l.a)(i.a.mark((function t(){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.info("Detecting objects in canvas with COCO..."),!P){t.next=10;break}return t.next=4,e.cocoNet.detect(P);case 4:n=t.sent,r=P.getContext("2d"),console.info("Detected Objects:"),console.info(n),C(n),O(n,r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.info("Detecting objects in canvas with QuickDraw..."),!P){t.next=8;break}return t.next=4,e.doddleClassifier.detect(P,m);case 4:n=t.sent,console.info("Detected Objects:"),console.info(n),C(1===m?[{class:n=n,score:10}]:n=n);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=12;break}if(P.width=S.width+200,P.height=S.height+200,P.getContext("2d").drawImage(S,100,100),console.info("Starting Object detection..."),h!==X.coco){e.next=9;break}return e.next=9,B();case 9:if(h!==X.quickDraw){e.next=12;break}return e.next=12,z();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,a.exportImage(M);case 3:t=e.sent,S.src=t;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(x.a,{orientation:"left",children:"Detect Objects in Drawings"}),Object(g.jsx)(u.a,{gutter:8,children:Object(g.jsx)(b.a,{span:24,children:Object(g.jsx)(Z,{setSketchCanvas:c})})}),Object(g.jsxs)(u.a,{gutter:8,children:[Object(g.jsx)(b.a,{span:6,children:Object(g.jsx)(I.a,{defaultValue:h,onChange:function(e){return p(e)},children:Object.keys(X).map((function(e){return Object(g.jsx)($,{value:e,children:e},e)}))})}),Object(g.jsx)(b.a,{span:6,children:Object(g.jsx)(T.a,{id:"erase-width",name:"erase-width",min:1,max:20,defaultValue:5,onChange:function(e){return k(e)},disabled:h===X.coco,style:{width:"100%"}})}),Object(g.jsx)(b.a,{span:12,children:Object(g.jsx)(R.a,{type:"primary",onClick:function(){return U.apply(this,arguments)},disabled:!P,children:"Run Object Detection"})})]}),Object(g.jsx)(u.a,{children:Object(g.jsxs)(b.a,{span:24,children:[Object(g.jsx)(x.a,{orientation:"left",children:"Detected Objects"}),Object(g.jsx)(N.b,{bordered:!0,dataSource:v,locale:{emptyText:"No Objects Detected"},renderItem:function(e){return Object(g.jsxs)(N.b.Item,{children:[Object(g.jsx)(F.a.Text,{strong:!0,type:e.score>=.65?"success":"secondary",children:e.class})," ",e.score]})}})]})}),Object(g.jsx)(u.a,{children:Object(g.jsx)(b.a,{span:24,children:Object(g.jsx)("canvas",{ref:function(e){return W(e)}})})})]})}!function(e){e.coco="coco",e.quickDraw="quickDraw"}(X||(X={})),_.displayName="ImageDrawerDetector";var ee=_,te=n(442),ne=n.n(te);var re=function(){var e=Object(r.useState)(),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(),s=Object(d.a)(c,2),o=s[0],x=s[1];function m(){return(m=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new D,e.next=3,t.loadModel();case 3:a(t),console.log("Doddle Classifier loaded.");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.c(),e.t0=x,e.next=4,f.load();case 4:e.t1=e.sent,(0,e.t0)(e.t1),console.log("Handpose model loaded.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){O.apply(this,arguments)}(),function(){m.apply(this,arguments)}()}),[]),Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(u.a,{children:Object(g.jsxs)(b.a,{span:24,children:[Object(g.jsx)(h.a,{title:"Image Processing",subTitle:"You can draw or upload images here."}),(!o||!n)&&Object(g.jsx)(p.a,{size:"large",tip:"Loading Object Detection Models...",indicator:Object(g.jsx)(ne.a,{style:{fontSize:48},spin:!0}),style:{display:"block",position:"fixed",zIndex:1031,top:"50%",right:"50%",marginTop:"-..px",marginRight:"-..px"}}),o&&n&&Object(g.jsxs)(u.a,{gutter:10,children:[Object(g.jsx)(b.a,{span:12,style:{paddingLeft:"3em"},children:Object(g.jsx)(ee,{cocoNet:o,doddleClassifier:n})}),Object(g.jsx)(b.a,{span:12,style:{paddingRight:"3em"},children:Object(g.jsx)(y,{cocoNet:o})})]})]})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,632)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(re,{})}),document.getElementById("root")),ae()}},[[612,1,2]]]);
//# sourceMappingURL=main.402d313d.chunk.js.map